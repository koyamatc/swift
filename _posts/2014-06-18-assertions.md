---
title: Swift
layout: post
postTitle:  Assertions
categories: basics
---


アサーション
==============================

オプショナルは、値の存在チェックをし、値が無い場合に対応したコードをうまく書くことができます。
時として、値が無かったり、　条件を満たさない値であって、コードの実行を続けられない場合があるでしょう。
このような状況で、アサーションを発生させ、コードの実行を終了したり、　
値が無い状態や無効な値の原因をデバッグする機会を提供することができます。


### Debugging with Assertions

アサーションは、　ランタイム検査であり、　論理条件を　true と評価します。
文字通り、　アサーションは、　条件が真であると *断言* するのです。
後に来るコードを実行する前に、肝となる条件が満たされることを確認するためにアサーションを使います。
条件を true と評価すれば、コードは実行を続け、　
false と評価すれば、コードの実行は停止し、アプリは終了します。　

アサーションを書くには、　グローバル・アサート関数を呼びます。　
アサート関数に、真か偽に評価される表現と、条件が偽となったときに表示されるメッセージをわたします。
{% highlight c linenos %}
let age = -3
assert(age >= 0, "A person's age cannot be less than zero")
// これはアサーションを発生させます、 なぜなら age >= 0　ではないからです
{% endhighlight %}
この例では、　age >= 0　が　真と評価された時だけ、つまり　age が　負の数ではないときにだけ実行さえます。
age が負の数ならば、 age >= 0 は　偽　と評価され、　アサーションが発生し、アプリは終了します。 

アサーション　メッセージに　文字列保管は使えません。
アサーション　メッセージは、不要ならば省くことができます。
{% highlight c %}
assert(age >= 0)
{% endhighlight %}

### アサーションを使うとき

条件が偽となる可能性がある場合には、アサーションを使いましょう、
しかし、実行を続けるためには条件は真にする必要があります。


+ 添え字を実装している配列などに、指標を受け渡す時に、指標の値が、小さすぎたり、大きすぎる可能性がある場合。
 
+ 関数に渡された値が無効なために、関数が処理を完結することができないとき。

+ オプショナル値は今のところ　nil だが、　最後までコードが実行されるには　nil では無い値が必要な時。

#### NOTE

アサーションはアプリを終了させます、
そして、無効な条件が発生しないようにコードをデザインするための代わりとはなりません。
それでもなお、アサーションは、無効な条件が起きる可能性がある状況では、
アプリを配布する前の開発段階で、そのような条件を浮き彫りにする効果的な方法であることは確かです。